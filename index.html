<script>
$(document).ready(function() {
    $.ajax({
        url: 'api.php',
        type: 'GET',
        dataType: 'json',
        success: function(response) {
            console.log('Получены данные:', response);
            
            if (response.error) {
                showError(response.message || response.error);
                return;
            }

            updateTopPlayers(response);
        },
        error: function(xhr, status, error) {
            console.error('Ошибка запроса:', status, error);
            showError('Ошибка соединения с сервером');
        }
    });

    function updateTopPlayers(players) {
        players.forEach((player, index) => {
            const num = index + 1;
            $(`.top${num}_name`).text(player.name || 'Неизвестно');
            $(`.top${num}_points`).text(player.value || '0');
        });
    }

    function showError(message) {
        $('.top1_name').text('Ошибка: ' + message);
        $('.top1_points').text('');
    }
});
</script>
